(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{355:function(e,t,a){"use strict";a.r(t);var r=a(42),i=Object(r.a)({},(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("h1",{attrs:{id:"grafana-servicenow-datasource"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#grafana-servicenow-datasource"}},[e._v("#")]),e._v(" grafana-servicenow-datasource")]),e._v(" "),a("p",[a("a",{attrs:{href:"LICENSE"}},[a("img",{attrs:{src:"https://img.shields.io/github/license/yesoreyeram/grafana-servicenow-datasource",alt:"License"}})]),e._v(" "),a("a",{attrs:{href:"https://github.com/yesoreyeram/grafana-servicenow-datasource/actions?query=workflow%3A%22Build+%26+Publish%22",target:"_blank",rel:"noopener noreferrer"}},[a("img",{attrs:{src:"https://github.com/yesoreyeram/grafana-servicenow-datasource/workflows/Build%20&%20Publish/badge.svg",alt:"Build"}}),a("OutboundLink")],1),e._v(" "),a("a",{attrs:{href:"https://github.com/yesoreyeram/grafana-servicenow-datasource/actions?query=workflow%3ALint",target:"_blank",rel:"noopener noreferrer"}},[a("img",{attrs:{src:"https://github.com/yesoreyeram/grafana-servicenow-datasource/workflows/Lint/badge.svg",alt:"Grafana Plugin Validation"}}),a("OutboundLink")],1),e._v(" "),a("a",{attrs:{href:"https://codeclimate.com/github/yesoreyeram/grafana-servicenow-datasource/maintainability",target:"_blank",rel:"noopener noreferrer"}},[a("img",{attrs:{src:"https://api.codeclimate.com/v1/badges/83c309f7c60efdfd2fd3/maintainability",alt:"Maintainability"}}),a("OutboundLink")],1),e._v(" "),a("a",{attrs:{href:"https://snyk.io/test/github/yesoreyeram/grafana-servicenow-datasource",target:"_blank",rel:"noopener noreferrer"}},[a("img",{attrs:{src:"https://snyk.io/test/github/yesoreyeram/grafana-servicenow-datasource/badge.svg",alt:"Known Vulnerabilities"}}),a("OutboundLink")],1)]),e._v(" "),a("p",[e._v("Service Now data source for Grafana.")]),e._v(" "),a("p",[a("img",{attrs:{src:"https://user-images.githubusercontent.com/153843/90498026-b5f2d100-e13f-11ea-9068-08f496d1df30.png",alt:"image"}}),e._v(" "),a("img",{attrs:{src:"https://user-images.githubusercontent.com/153843/90538813-f7eb3980-e176-11ea-9a51-bf9ee1be2a78.png",alt:"image"}})]),e._v(" "),a("p",[e._v("For more screenshots, follow "),a("a",{attrs:{href:"https://github.com/yesoreyeram/grafana-servicenow-datasource/issues/1",target:"_blank",rel:"noopener noreferrer"}},[e._v("this github issue"),a("OutboundLink")],1),e._v(".")]),e._v(" "),a("p",[a("strong",[e._v("Warning:")]),e._v(" This is not official plugin from Grafana / Service Now. Use "),a("a",{attrs:{href:"https://grafana.com/grafana/plugins/grafana-servicenow-datasource",target:"_blank",rel:"noopener noreferrer"}},[e._v("official plugin from Grafana"),a("OutboundLink")],1),e._v(" for additional capabilities like alerting, official support. This is a community contributed plugin and it may have only limited features comparing to official plugin.")]),e._v(" "),a("h2",{attrs:{id:"time-fields-in-query-filters"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#time-fields-in-query-filters"}},[e._v("#")]),e._v(" Time fields in query & filters")]),e._v(" "),a("p",[e._v("If you want to use grafana time picker's time field in your query/filter values, you can use the following macros to represent grafana time picker's fields. "),a("code",[e._v("$__timeFrom()")]),e._v(" represents start time and "),a("code",[e._v("$__timeTo()")]),e._v(" represents end time in grafana. This can be combined with query fields like "),a("strong",[e._v("Greater Than")]),e._v(" and "),a("strong",[e._v("Less Than")]),e._v(". Use "),a("code",[e._v("$__timeFilter()")]),e._v(" if you want use "),a("strong",[e._v("Between")]),e._v(" query field.")]),e._v(" "),a("ul",[a("li",[a("p",[a("code",[e._v("$__timeFrom()")]),e._v(" Returns the From datetime from the Grafana picker. Example: "),a("code",[e._v("javascript:gs.dateGenerate('YYYY-MM-DD','HH:mm:ss')")])])]),e._v(" "),a("li",[a("p",[a("code",[e._v("$__timeTo()")]),e._v(" Returns the To datetime from the Grafana picker. Example: "),a("code",[e._v("javascript:gs.dateGenerate('YYYY-MM-DD','HH:mm:ss')")])])]),e._v(" "),a("li",[a("p",[a("code",[e._v("$__timeFilter()")]),e._v(" - Expands to "),a("code",[e._v("javascript:gs.dateGenerate('YYYY-MM-DD','HH:mm:ss')@javascript:gs.dateGenerate('YYYY-MM-DD','HH:mm:ss')")]),e._v(" where the from and to date times are from the Grafana time picker.")])])]),e._v(" "),a("p",[e._v("In query field this can be used like "),a("code",[e._v("start_date>$__timeFrom()^start_date<$__timeTo()")]),e._v(". Above example returns data where start_date is within grafana time range. Also "),a("code",[e._v("start_dateBETWEEN$__timeFilter()")]),e._v(" can be used as shortcut.")]),e._v(" "),a("h2",{attrs:{id:"template-variables"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#template-variables"}},[e._v("#")]),e._v(" Template variables")]),e._v(" "),a("p",[e._v("If you want to pull the list of items for any field in a table as a variable dropdown, use the following query to define the variable")]),e._v(" "),a("table",[a("thead",[a("tr",[a("th",[e._v("Format")]),e._v(" "),a("th",[e._v("Definition")]),e._v(" "),a("th",[e._v("Example")])])]),e._v(" "),a("tbody",[a("tr",[a("td",[a("code",[e._v("list(YOUR_TABLE_NAME,YOUR_FIELD_NAME)")])]),e._v(" "),a("td",[e._v("This will list all the "),a("strong",[e._v("YOUR_FIELD_NAME")]),e._v(" from the "),a("strong",[e._v("YOUR_TABLE_NAME")]),e._v(" table.")]),e._v(" "),a("td",[a("code",[e._v("list(incident,state)")]),e._v(" will list all the state values from the incident table.")])]),e._v(" "),a("tr",[a("td",[a("code",[e._v("list(YOUR_TABLE_NAME,YOUR_FIELD_NAME,YOUR_QUERY)")])]),e._v(" "),a("td",[e._v("This will list all the "),a("strong",[e._v("YOUR_FIELD_NAME")]),e._v(" from the "),a("strong",[e._v("YOUR_TABLE_NAME")]),e._v(" table after applying "),a("strong",[e._v("YOUR_QUERY")]),e._v(" filter. Query can contain any number of and/or conditions")]),e._v(" "),a("td",[a("code",[e._v("list(change_request,assignment_group,assignment_group.nameLIKEInfra)")]),e._v(" will list all the assignment_groups from the change_request table where the assignment group name is like Infra.")])])])]),e._v(" "),a("p",[a("strong",[e._v("Note:")]),e._v(" Under the hood, the list query performs an aggregation over the table and returns the result. So consider the performance impact while querying fields with lots of unique values.")]),e._v(" "),a("h2",{attrs:{id:"annotation"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#annotation"}},[e._v("#")]),e._v(" Annotation")]),e._v(" "),a("p",[e._v("You can annotate any servicenow table data as annotation in grafana with any of the time field in that table. For example, you can annotate "),a("strong",[e._v("Priority 1")]),e._v(" incidents as annotations over a graph as an event. Annotation fields and their usage.")]),e._v(" "),a("table",[a("thead",[a("tr",[a("th",[e._v("Field")]),e._v(" "),a("th",[e._v("Description")])])]),e._v(" "),a("tbody",[a("tr",[a("td",[e._v("Title")]),e._v(" "),a("td",[e._v("Field in service now displayed as annotation title. Typically it is "),a("strong",[e._v("number")]),e._v(" or "),a("strong",[e._v("short_description")]),e._v(". Only single field allowed.")])]),e._v(" "),a("tr",[a("td",[e._v("Description")]),e._v(" "),a("td",[e._v("Field in service now displayed as annotation description.Typically it will be "),a("strong",[e._v("short_description")]),e._v(" of "),a("strong",[e._v("description")]),e._v(". Only single field allowed.")])]),e._v(" "),a("tr",[a("td",[e._v("Stat Time Field")]),e._v(" "),a("td",[a("strong",[e._v("[Mandatory]")]),e._v(" Field in service now which should be considered as annotation start time.")])]),e._v(" "),a("tr",[a("td",[e._v("End Time Field")]),e._v(" "),a("td",[e._v("Field in service now which should be considered as annotation start time. If you specify this field, annotation will be shown as ranged annotation.")])]),e._v(" "),a("tr",[a("td",[e._v("Tags")]),e._v(" "),a("td",[e._v("List of comma separated fields you want to show as tags in annotation")])]),e._v(" "),a("tr",[a("td",[e._v("Query")]),e._v(" "),a("td",[e._v("Service now filter query string to filter the number of events."),a("br"),a("br"),e._v("Example: "),a("code",[e._v("short_descriptionLIKEoutage^priority<3")]),e._v(" filter the records with all the two conditions. "),a("br"),e._v("1: "),a("strong",[e._v("short_description")]),e._v(" contains the work outage."),a("br"),e._v("2: "),a("strong",[e._v("priority")]),e._v(" less than 3."),a("br"),e._v("Apart from the two conditions, query automatically include filter with your start time field over grafana time range.")])]),e._v(" "),a("tr",[a("td",[e._v("Custom Description")]),e._v(" "),a("td",[e._v("Custom description on the annotation. You can specify content using plain text / HTML tags."),a("br"),e._v(" If you want to provide field values in text specify "),a("code",[e._v("${__data.fields[FIELD_NAME]}")]),e._v(" as token where "),a("code",[e._v("FIELD_NAME")]),e._v(" is your service now field name (should be one of the tags/title fields specified)."),a("br"),a("br"),e._v("Example : "),a("code",[e._v('<a href="https://XXXX.service-now.com/incident.do?sysparm_query=number={field.number}" target="_blank">More about ${__data.fields[number]}</a>')]),e._v(" will be turned into hyperlink.")])])])]),e._v(" "),a("h2",{attrs:{id:"installation"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#installation"}},[e._v("#")]),e._v(" Installation")]),e._v(" "),a("p",[e._v("There are multiple ways to install this plugin into your grafana instance")]),e._v(" "),a("h4",{attrs:{id:"download-and-extract-zip-file"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#download-and-extract-zip-file"}},[e._v("#")]),e._v(" Download and extract zip file")]),e._v(" "),a("p",[e._v("Download the zip file from "),a("a",{attrs:{href:"https://github.com/yesoreyeram/grafana-servicenow-datasource/archive/master.zip",target:"_blank",rel:"noopener noreferrer"}},[e._v("github"),a("OutboundLink")],1),e._v(" and extract into your grafana plugin folder. Then restart Grafana.")]),e._v(" "),a("h4",{attrs:{id:"using-grafana-cli"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#using-grafana-cli"}},[e._v("#")]),e._v(" Using grafana-cli")]),e._v(" "),a("p",[e._v("If you are using grafana-cli, execute the following command to install the plugin")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("grafana-cli --pluginUrl https://github.com/yesoreyeram/grafana-servicenow-datasource/archive/master.zip plugins install yesoreyeram-servicenow-datasource\n")])])]),a("h4",{attrs:{id:"using-helm-chart"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#using-helm-chart"}},[e._v("#")]),e._v(" Using helm chart")]),e._v(" "),a("p",[e._v("If you use help chart to provision grafana, use the following config to install the plugin")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("plugins:\n  - https://github.com/yesoreyeram/grafana-servicenow-datasource/archive/master.zip;yesoreyeram-servicenow-datasource\n")])])]),a("h2",{attrs:{id:"configurations"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#configurations"}},[e._v("#")]),e._v(" Configurations")]),e._v(" "),a("p",[e._v("Configuration of the plugin requires following field.")]),e._v(" "),a("table",[a("thead",[a("tr",[a("th",[e._v("Field")]),e._v(" "),a("th",[e._v("Description")])])]),e._v(" "),a("tbody",[a("tr",[a("td",[e._v("URL")]),e._v(" "),a("td",[e._v("URL for the service now instance. Typically, it will be "),a("code",[e._v("https://<YOUR_INSTNACE_NAME>.service-now.com")]),e._v(".")])]),e._v(" "),a("tr",[a("td",[e._v("Username")]),e._v(" "),a("td",[e._v("Service now username")])]),e._v(" "),a("tr",[a("td",[e._v("Password")]),e._v(" "),a("td",[e._v("Service now password")])])])]),e._v(" "),a("h4",{attrs:{id:"provisioning-via-file"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#provisioning-via-file"}},[e._v("#")]),e._v(" Provisioning via file")]),e._v(" "),a("p",[e._v("If you want to use the grafana provisioning feature, use the following yaml")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("apiVersion: 1\n\ndatasources:\n- name: <Datasource Name>\n  type: yesoreyeram-servicenow-datasource\n  access: proxy\n  isDefault: false\n  url: https://<YOUR_INSTNACE_NAME>.service-now.com\n  basicAuth: true\n  basicAuthUser: <Service Now User Name>\n  withCredentials: false\n  secureJsonData:\n       basicAuthPassword: <Service Now Password>\n  version: 1\n  readOnly: false\n")])])]),a("h2",{attrs:{id:"service-now-permissions"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#service-now-permissions"}},[e._v("#")]),e._v(" Service now permissions")]),e._v(" "),a("p",[e._v("In order to retrieve the data from service-now, the user account used should have appropriate roles in service now. Typically "),a("a",{attrs:{href:"https://docs.servicenow.com/bundle/orlando-it-business-management/page/product/project-portfolio-suite-with-financials/reference/business-stakeholder-role-ppm.html",target:"_blank",rel:"noopener noreferrer"}},[a("strong",[e._v("Business Stakeholder role")]),a("OutboundLink")],1),e._v(" can give enough permissions to read the data. If you want to reduce the permissions to more granular level, use one or more of the following roles.")]),e._v(" "),a("ul",[a("li",[e._v("sn_incident_read")]),e._v(" "),a("li",[e._v("sn_change_read")]),e._v(" "),a("li",[e._v("sn_problem_read")]),e._v(" "),a("li",[e._v("sn_request_read")]),e._v(" "),a("li",[e._v("cmdb_read")])]),e._v(" "),a("h2",{attrs:{id:"service-now-wiki-useful-links"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#service-now-wiki-useful-links"}},[e._v("#")]),e._v(" Service Now wiki useful links")]),e._v(" "),a("p",[a("a",{attrs:{href:"https://docs.servicenow.com/bundle/paris-platform-user-interface/page/use/common-ui-elements/reference/r_OpAvailableFiltersQueries.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("Operators available for filters and queries"),a("OutboundLink")],1)])])}),[],!1,null,null,null);t.default=i.exports}}]);